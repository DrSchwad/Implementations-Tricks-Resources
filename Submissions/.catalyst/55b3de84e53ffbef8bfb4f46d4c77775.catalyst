{"title":"D. Priority Queue","contestId":"1542","problemIndex":"D","timeLimit":"3 seconds","memLimit":"512 megabytes","inputFormat":"standard input","outputFormat":"standard output","problemHtml":"<p>You are given a sequence $$$A$$$, where its elements are either in the form <span class=\"tex-font-style-tt\">+ x</span> or <span class=\"tex-font-style-tt\">-</span>, where $$$x$$$ is an integer.</p><p>For such a sequence $$$S$$$ where its elements are either in the form <span class=\"tex-font-style-tt\">+ x</span> or <span class=\"tex-font-style-tt\">-</span>, define $$$f(S)$$$ as follows:</p><ul> <li> iterate through $$$S$$$&apos;s elements from the first one to the last one, and maintain a multiset $$$T$$$ as you iterate through it. </li><li> for each element, if it&apos;s in the form <span class=\"tex-font-style-tt\">+ x</span>, add $$$x$$$ to $$$T$$$; otherwise, erase the smallest element from $$$T$$$ (if $$$T$$$ is empty, do nothing). </li><li> after iterating through all $$$S$$$&apos;s elements, compute the sum of all elements in $$$T$$$. $$$f(S)$$$ is defined as the sum. </li></ul><p>The sequence $$$b$$$ is a subsequence of the sequence $$$a$$$ if $$$b$$$ can be derived from $$$a$$$ by removing zero or more elements without changing the order of the remaining elements. For all $$$A$$$&apos;s subsequences $$$B$$$, compute the sum of $$$f(B)$$$, modulo $$$998\\,244\\,353$$$.</p>","inSpecsHtml":"<div class=\"section-title\">Input</div><p>The first line contains an integer $$$n$$$ ($$$1\\leq n\\leq 500$$$) &#x2014; the length of $$$A$$$.</p><p>Each of the next $$$n$$$ lines begins with an operator <span class=\"tex-font-style-tt\">+</span> or <span class=\"tex-font-style-tt\">-</span>. If the operator is <span class=\"tex-font-style-tt\">+</span>, then it&apos;s followed by an integer $$$x$$$ ($$$1\\le x&lt;998\\,244\\,353$$$). The $$$i$$$-th line of those $$$n$$$ lines describes the $$$i$$$-th element in $$$A$$$.</p>","outSpecsHtml":"<div class=\"section-title\">Output</div><p>Print one integer, which is the answer to the problem, modulo $$$998\\,244\\,353$$$.</p>","noteHtml":"<div class=\"section-title\">Note</div><p>In the first example, the following are all possible pairs of $$$B$$$ and $$$f(B)$$$:</p><ul> <li> $$$B=$$$ <span class=\"tex-font-style-tt\">{}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 1, -}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 1, -}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 2, -}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 2, -}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, -}</span>, $$$f(B)=0$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 1, + 2}</span>, $$$f(B)=3$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 1, + 2, -}</span>, $$$f(B)=2$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 1, + 2}</span>, $$$f(B)=3$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 1, + 2, -}</span>, $$$f(B)=2$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 1}</span>, $$$f(B)=1$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 1}</span>, $$$f(B)=1$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{-, + 2}</span>, $$$f(B)=2$$$. </li><li> $$$B=$$$ <span class=\"tex-font-style-tt\">{+ 2}</span>, $$$f(B)=2$$$. </li></ul><p>The sum of these values is $$$16$$$.</p>","sampleTestcases":[{"id":1625418581897,"input":"4\n-\n+ 1\n+ 2\n-\n","output":"16","result":{"id":1625418581897,"stdout":"16\n","stderr":"","exitcode":0,"signal":null,"time":102,"timeout":false}},{"id":1625418581898,"input":"15\n+ 2432543\n-\n+ 4567886\n+ 65638788\n-\n+ 578943\n-\n-\n+ 62356680\n-\n+ 711111\n-\n+ 998244352\n-\n-","output":"750759115","result":{"id":1625418581898,"stdout":"750759115\n","stderr":"","exitcode":0,"signal":null,"time":109,"timeout":false}}],"submitUrl":"https://codeforces.com/contest/1542/submit","language":"c++","isPartOfContest":true,"langId":"54"}